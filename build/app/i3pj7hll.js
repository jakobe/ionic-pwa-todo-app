/*! Built with http://stenciljs.com */
const{h:t,Context:e}=window.App;import{applyStyles as s,assert as i,getElementReference as a,now as n,updateDetail as o,debounce as h}from"./chunk2.js";import{BLOCK_ALL as r,GestureController as l}from"./chunk3.js";class c{constructor(){this.publicServerKey=function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(e),i=new Uint8Array(s.length);for(let t=0;t<s.length;++t)i[t]=s.charCodeAt(t);return i}("BBsb4au59pTKF4IKi-aJkEAGPXxtzs-lbtL58QxolsT2T-3dVQIXTUCCE1TSY8hyUvXLhJFEUmH7b5SJfSTcT-E")}componentWillLoad(){"serviceWorker"in navigator&&"PushManager"in window?this.swSupport=!0:this.swSupport=!1}subscribeToNotify(t){console.log(t.detail.checked),!0===t.detail.checked&&this.handleSub()}handleSub(){navigator.serviceWorker.getRegistration().then(t=>{t.pushManager.getSubscription().then(e=>{null===e&&t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.publicServerKey}).then(t=>{console.log("web push subscription: ",t),this.notify=!0})})})}render(){if(this.match&&this.match.params.name)return t("ion-page",null,t("ion-header",null,t("ion-toolbar",{color:"primary"},t("ion-title",null,"Ionic PWA Toolkit"))),t("ion-content",null,t("p",null,"Hello! My name is ",this.match.params.name,". My name was passed in through a route param!"),this.swSupport?t("ion-item",null,t("ion-label",null,"Notifications"),t("ion-toggle",{checked:this.notify,disabled:this.notify})):null))}static get is(){return"app-profile"}static get properties(){return{match:{type:"Any",attr:"match"},notify:{state:!0},swSupport:{state:!0},toastCtrl:{connect:"ion-toast-controller"}}}static get style(){return"app-profile ion-scroll{padding:15px}"}}class u{constructor(t,e,s){this.dirty=!1,this.isPan=0;const i=s*(Math.PI/180);this.isDirX="x"===t,this.maxCosine=Math.cos(i),this.threshold=e*e}start(t,e){this.startX=t,this.startY=e,this.isPan=0,this.dirty=!0}detect(t,e){if(!this.dirty)return!1;const s=t-this.startX,i=e-this.startY,a=s*s+i*i;if(a<this.threshold)return!1;const n=Math.sqrt(a),o=(this.isDirX?s:i)/n;return o>this.maxCosine?this.isPan=1:o<-this.maxCosine?this.isPan=-1:this.isPan=0,this.dirty=!1,!0}isGesture(){return 0!==this.isPan}getDirection(){return this.isPan}}class d{constructor(){this.detail={},this.positions=[],this.lastTouch=0,this.hasCapturedPan=!1,this.hasPress=!1,this.hasStartedPan=!1,this.hasFiredStart=!0,this.isMoveQueued=!1,this.disabled=!1,this.attachTo="child",this.autoBlockAll=!1,this.block=null,this.disableScroll=!1,this.direction="x",this.gestureName="",this.gesturePriority=0,this.passive=!0,this.maxAngle=40,this.threshold=10,this.type="pan"}componentDidLoad(){this.ctrl=Ionic.gesture=Ionic.gesture||new l,this.gesture=this.ctrl.createGesture(this.gestureName,this.gesturePriority,this.disableScroll);const t=this.type.replace(/\s/g,"").toLowerCase().split(",");t.indexOf("pan")>-1&&(this.pan=new u(this.direction,this.threshold,this.maxAngle)),this.hasPress=t.indexOf("press")>-1,this.disabledChanged(this.disabled),(this.pan||this.hasPress)&&this.dom.write(()=>{s(a(this.el,this.attachTo),p)}),this.autoBlockAll&&(this.blocker=this.ctrl.createBlocker(r),this.blocker.block())}disabledChanged(t){(this.pan||this.hasPress)&&(this.enableListener(this,"touchstart",!t,this.attachTo,this.passive),this.enableListener(this,"mousedown",!t,this.attachTo,this.passive),t&&this.abortGesture())}blockChanged(t){this.blocker&&this.blocker.destroy(),t&&(this.blocker=this.ctrl.createBlocker({disable:t.split(",")}))}onTouchStart(t){this.lastTouch=n(t),this.pointerDown(t,this.lastTouch)?(this.enableMouse(!1),this.enableTouch(!0)):this.abortGesture()}onMouseDown(t){const e=n(t);(0===this.lastTouch||this.lastTouch+b<e)&&(this.pointerDown(t,e)?(this.enableMouse(!0),this.enableTouch(!1)):this.abortGesture())}pointerDown(t,e){if(!this.gesture||this.hasStartedPan||!this.hasFiredStart)return!1;const s=this.detail;if(o(t,s),s.startX=s.currentX,s.startY=s.currentY,s.startTimeStamp=s.timeStamp=e,s.velocityX=s.velocityY=s.deltaX=s.deltaY=0,s.event=t,this.positions.length=0,i(this.hasFiredStart,"fired start must be false"),i(!this.hasStartedPan,"pan can be started at this point"),i(!this.hasCapturedPan,"pan can be started at this point"),i(!this.isMoveQueued,"some move is still queued"),i(0===this.positions.length,"positions must be emprty"),this.canStart&&!1===this.canStart(s))return!1;if(this.gesture.release(),!this.gesture.start())return!1;if(this.positions.push(s.currentX,s.currentY,e),this.pan){if(this.hasStartedPan=!0,0===this.threshold)return this.tryToCapturePan();this.pan.start(s.startX,s.startY)}return!0}onTouchMove(t){this.lastTouch=this.detail.timeStamp=n(t),this.pointerMove(t)}onMoveMove(t){const e=n(t);(0===this.lastTouch||this.lastTouch+b<e)&&(this.detail.timeStamp=e,this.pointerMove(t))}pointerMove(t){if(i(!!this.pan,"pan must be non null"),this.hasCapturedPan)return void(!this.isMoveQueued&&this.hasFiredStart&&(this.isMoveQueued=!0,this.calcGestureData(t),this.dom.write(this.fireOnMove.bind(this))));const e=this.detail;this.calcGestureData(t),this.pan.detect(e.currentX,e.currentY)&&this.pan.isGesture()&&(this.tryToCapturePan()||this.abortGesture())}fireOnMove(){if(!this.hasCapturedPan)return;const t=this.detail;this.isMoveQueued=!1,this.onMove?this.onMove(t):this.ionGestureMove.emit(t)}calcGestureData(t){const e=this.detail;o(t,e);const s=e.currentX,i=e.currentY,a=e.timeStamp;e.deltaX=s-e.startX,e.deltaY=i-e.startY,e.event=t;const n=a-100,h=this.positions;let r=h.length-1;for(;r>0&&h[r]>n;)r-=3;if(r>1){const t=1/(h[r]-a),n=h[r-1]-i,o=h[r-2]-s;e.velocityX=o*t,e.velocityY=n*t}else e.velocityX=0,e.velocityY=0;h.push(s,i,a)}tryToCapturePan(){if(this.gesture&&!this.gesture.capture())return!1;this.hasCapturedPan=!0,this.hasFiredStart=!1;const t=this.detail;return t.startX=t.currentX,t.startY=t.currentY,t.startTimeStamp=t.timeStamp,this.onWillStart?this.onWillStart(this.detail).then(this.fireOnStart.bind(this)):this.fireOnStart(),!0}fireOnStart(){i(!this.hasFiredStart,"has fired must be false"),this.onStart?this.onStart(this.detail):this.ionGestureStart.emit(this.detail),this.hasFiredStart=!0}abortGesture(){this.reset(),this.enable(!1),this.notCaptured&&this.notCaptured(this.detail)}reset(){this.hasCapturedPan=!1,this.hasStartedPan=!1,this.isMoveQueued=!1,this.hasFiredStart=!0,this.gesture&&this.gesture.release()}onTouchCancel(t){this.lastTouch=this.detail.timeStamp=n(t),this.pointerUp(t),this.enableTouch(!1)}onTouchEnd(t){this.lastTouch=this.detail.timeStamp=n(t),this.pointerUp(t),this.enableTouch(!1)}onMouseUp(t){const e=n(t);(0===this.lastTouch||this.lastTouch+b<e)&&(this.detail.timeStamp=e,this.pointerUp(t),this.enableMouse(!1))}pointerUp(t){const e=this.hasCapturedPan,s=this.hasFiredStart;if(this.reset(),!s)return;const i=this.detail;if(this.calcGestureData(t),e)return i.type="pan",void(this.onEnd?this.onEnd(i):this.ionGestureEnd.emit(i));this.hasPress&&this.detectPress()||(this.notCaptured?this.notCaptured(i):this.ionGestureNotCaptured.emit(i))}detectPress(){const t=this.detail,e=t.deltaX,s=t.deltaY;return e*e+s*s<100&&(t.type="press",this.onPress?this.onPress(t):this.ionPress.emit(t),!0)}enableMouse(t){this.pan&&this.enableListener(this,"document:mousemove",t,void 0,this.passive),this.enableListener(this,"document:mouseup",t,void 0,this.passive)}enableTouch(t){this.pan&&this.enableListener(this,"touchmove",t,this.attachTo,this.passive),this.enableListener(this,"touchcancel",t,this.attachTo,this.passive),this.enableListener(this,"touchend",t,this.attachTo,this.passive)}enable(t){this.enableMouse(t),this.enableTouch(t)}componentDidUnload(){this.blocker&&(this.blocker.destroy(),this.blocker=null),this.gesture&&this.gesture.destroy(),this.ctrl=this.gesture=this.pan=this.detail=this.detail.event=null}static get is(){return"ion-gesture"}static get properties(){return{attachTo:{type:"Any",attr:"attach-to"},autoBlockAll:{type:Boolean,attr:"auto-block-all"},block:{type:String,attr:"block",watchCallbacks:["blockChanged"]},canStart:{type:"Any",attr:"can-start"},direction:{type:String,attr:"direction"},disabled:{type:Boolean,attr:"disabled",watchCallbacks:["disabledChanged"]},disableScroll:{type:Boolean,attr:"disable-scroll"},dom:{context:"dom"},el:{elementRef:!0},enableListener:{context:"enableListener"},gestureName:{type:String,attr:"gesture-name"},gesturePriority:{type:Number,attr:"gesture-priority"},maxAngle:{type:Number,attr:"max-angle"},notCaptured:{type:"Any",attr:"not-captured"},onEnd:{type:"Any",attr:"on-end"},onMove:{type:"Any",attr:"on-move"},onPress:{type:"Any",attr:"on-press"},onStart:{type:"Any",attr:"on-start"},onWillStart:{type:"Any",attr:"on-will-start"},passive:{type:Boolean,attr:"passive"},threshold:{type:Number,attr:"threshold"},type:{type:String,attr:"type"}}}static get events(){return[{name:"ionGestureMove",method:"ionGestureMove",bubbles:!0,cancelable:!0,composed:!0},{name:"ionGestureStart",method:"ionGestureStart",bubbles:!0,cancelable:!0,composed:!0},{name:"ionGestureEnd",method:"ionGestureEnd",bubbles:!0,cancelable:!0,composed:!0},{name:"ionGestureNotCaptured",method:"ionGestureNotCaptured",bubbles:!0,cancelable:!0,composed:!0},{name:"ionPress",method:"ionPress",bubbles:!0,cancelable:!0,composed:!0}]}}const p={"touch-action":"none","user-select":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b=2500,m=window.TapticEngine;function g(){m&&m.selection()}class y{constructor(){this.activated=!1,this.checked=!1,this.disabled=!1,this.value="on",this.gestureConfig={onStart:this.onDragStart.bind(this),onMove:this.onDragMove.bind(this),onEnd:this.onDragEnd.bind(this),gestureName:"toggle",gesturePriority:30,type:"pan",direction:"x",threshold:0,attachTo:"parent"}}componentWillLoad(){this.ionStyle.emit=h(this.ionStyle.emit.bind(this.ionStyle)),this.inputId=`ion-tg-${S++}`,void 0===this.name&&(this.name=this.inputId),this.emitStyle()}componentDidLoad(){this.didLoad=!0;const t=this.nativeInput.closest("ion-item");if(t){const e=t.querySelector("ion-label");e&&(e.id=this.inputId+"-lbl",this.nativeInput.setAttribute("aria-labelledby",e.id))}}checkedChanged(t){this.didLoad&&this.ionChange.emit({checked:t,value:this.value}),this.emitStyle()}emitStyle(){this.ionStyle.emit({"toggle-disabled":this.disabled,"toggle-checked":this.checked,"toggle-activated":this.activated})}onDragStart(t){this.pivotX=t.currentX,this.activated=!0}onDragMove(t){const e=t.currentX;v(this.checked,e-this.pivotX,-15)&&(this.checked=!this.checked,this.pivotX=e,g())}onDragEnd(t){const e=t.currentX-this.pivotX;v(this.checked,e,4)&&(this.checked=!this.checked,g()),this.activated=!1,this.nativeInput.focus()}onChange(){this.checked=!this.checked}onKeyUp(){this.keyFocus=!0}onFocus(){this.ionFocus.emit()}onBlur(){this.keyFocus=!1,this.ionBlur.emit()}hostData(){return{class:{"toggle-activated":this.activated,"toggle-checked":this.checked,"toggle-disabled":this.disabled,"toggle-key":this.keyFocus}}}render(){return[t("ion-gesture",Object.assign({},this.gestureConfig,{disabled:this.disabled,tabIndex:-1}),t("div",{class:"toggle-icon"},t("div",{class:"toggle-inner"})),t("div",{class:"toggle-cover"})),t("input",{type:"checkbox",onChange:this.onChange.bind(this),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onKeyUp:this.onKeyUp.bind(this),checked:this.checked,id:this.inputId,name:this.name,value:this.value,disabled:this.disabled,ref:t=>this.nativeInput=t})]}static get is(){return"ion-toggle"}static get host(){return{theme:"toggle"}}static get properties(){return{activated:{state:!0},checked:{type:Boolean,attr:"checked",mutable:!0,watchCallbacks:["checkedChanged"]},color:{type:String,attr:"color"},disabled:{type:Boolean,attr:"disabled",mutable:!0,watchCallbacks:["emitStyle"]},keyFocus:{state:!0},mode:{type:"Any",attr:"mode"},name:{type:String,attr:"name",mutable:!0},value:{type:String,attr:"value"}}}static get events(){return[{name:"ionChange",method:"ionChange",bubbles:!0,cancelable:!0,composed:!0},{name:"ionFocus",method:"ionFocus",bubbles:!0,cancelable:!0,composed:!0},{name:"ionBlur",method:"ionBlur",bubbles:!0,cancelable:!0,composed:!0},{name:"ionStyle",method:"ionStyle",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"ion-toggle{display:inline-block;contain:content}ion-toggle ion-gesture{display:block;width:100%;height:100%;visibility:inherit}.toggle-cover{left:0;position:absolute;top:0;width:100%;height:100%;border:0;outline:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;background:0 0;cursor:pointer}ion-toggle input{left:0;top:0;margin:0;position:absolute;width:100%;height:100%;background:0 0;cursor:pointer;pointer-events:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}ion-toggle :focus{outline:0}.toggle-key input{border:2px solid #5e9ed6}.toggle-md{padding:12px;box-sizing:content-box;position:relative;width:36px;height:14px;contain:strict}.toggle-md .toggle-icon{border-radius:14px;position:relative;display:block;width:100%;height:100%;background-color:var(--ion-item-md-border-color,var(--ion-item-border-color,#dedede));transition:background-color .3s;pointer-events:none}.toggle-md .toggle-inner{left:0;top:-3px;border-radius:50%;position:absolute;width:20px;height:20px;background-color:var(--ion-background-md-color,var(--ion-background-color,#fff));box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);transition-duration:.3s;transition-property:transform,background-color;will-change:transform,background-color;contain:strict}.toggle-md.toggle-checked .toggle-icon{background-color:rgba(var(--ion-color-md-primary-rgb,var(--ion-color-primary-rgb,72,138,255)),var(--ion-alpha-md-medium,var(--ion-alpha-medium,.4)))}.toggle-md.toggle-checked .toggle-inner{transform:translate3d(16px,0,0);background-color:var(--ion-color-md-primary,var(--ion-color-primary,#488aff))}.item-md.item-toggle-disabled ion-label,.toggle-md.toggle-disabled{opacity:.3;pointer-events:none}.toggle-md.toggle-disabled ion-radio{opacity:.3}.item-md .toggle-md[slot]{margin:0;padding:12px 8px 12px 16px;cursor:pointer}.item-md .toggle-md[slot=start]{padding:12px 18px 12px 2px}.item-md.item-toggle ion-label{margin-left:0}.toggle-md-primary.toggle-checked .toggle-icon{background-color:var(--ion-color-md-primary-tint,var(--ion-color-primary-tint,#5a96ff))}.toggle-md-primary.toggle-checked .toggle-inner{background-color:var(--ion-color-md-primary,var(--ion-color-primary,#488aff))}.toggle-md-secondary.toggle-checked .toggle-icon{background-color:var(--ion-color-md-secondary-tint,var(--ion-color-secondary-tint,#47df74))}.toggle-md-secondary.toggle-checked .toggle-inner{background-color:var(--ion-color-md-secondary,var(--ion-color-secondary,#32db64))}.toggle-md-tertiary.toggle-checked .toggle-icon{background-color:var(--ion-color-md-tertiary-tint,var(--ion-color-tertiary-tint,#f5b255))}.toggle-md-tertiary.toggle-checked .toggle-inner{background-color:var(--ion-color-md-tertiary,var(--ion-color-tertiary,#f4a942))}.toggle-md-success.toggle-checked .toggle-icon{background-color:var(--ion-color-md-success-tint,var(--ion-color-success-tint,#28e070))}.toggle-md-success.toggle-checked .toggle-inner{background-color:var(--ion-color-md-success,var(--ion-color-success,#10dc60))}.toggle-md-warning.toggle-checked .toggle-icon{background-color:var(--ion-color-md-warning-tint,var(--ion-color-warning-tint,#ffd31a))}.toggle-md-warning.toggle-checked .toggle-inner{background-color:var(--ion-color-md-warning,var(--ion-color-warning,#ffce00))}.toggle-md-danger.toggle-checked .toggle-icon{background-color:var(--ion-color-md-danger-tint,var(--ion-color-danger-tint,#f65050))}.toggle-md-danger.toggle-checked .toggle-inner{background-color:var(--ion-color-md-danger,var(--ion-color-danger,#f53d3d))}.toggle-md-light.toggle-checked .toggle-icon{background-color:var(--ion-color-md-light-tint,var(--ion-color-light-tint,#f5f5f5))}.toggle-md-light.toggle-checked .toggle-inner{background-color:var(--ion-color-md-light,var(--ion-color-light,#f4f4f4))}.toggle-md-medium.toggle-checked .toggle-icon{background-color:var(--ion-color-md-medium-tint,var(--ion-color-medium-tint,#a2a4ab))}.toggle-md-medium.toggle-checked .toggle-inner{background-color:var(--ion-color-md-medium,var(--ion-color-medium,#989aa2))}.toggle-md-dark.toggle-checked .toggle-icon{background-color:var(--ion-color-md-dark-tint,var(--ion-color-dark-tint,#383838))}.toggle-md-dark.toggle-checked .toggle-inner{background-color:var(--ion-color-md-dark,var(--ion-color-dark,#222))}"}static get styleMode(){return"md"}}function v(t,e,s){const i="rtl"===document.dir;return t?!i&&s>e||i&&-s<e:!i&&-s<e||i&&s>e}let S=0;export{c as AppProfile,d as IonGesture,y as IonToggle};